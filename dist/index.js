const http=require("http"),url=require("url"),{addNumbers:addNumbers}=require("./math"),PORT=process.env.PORT||3e3,server=http.createServer(((e,r)=>{r.setHeader("X-XSS-Protection","1; mode=block"),r.setHeader("X-Frame-Options","DENY"),r.setHeader("X-Content-Type-Options","nosniff");const{pathname:t,query:n}=url.parse(e.url,!0);if("/add"===t&&"GET"===e.method){const{num1:e,num2:t}=n;if(!e||!t)return r.writeHead(400,{"Content-Type":"text/plain"}),void r.end("Please provide two numbers as query parameters: num1 and num2");const o=parseFloat(e),a=parseFloat(t);if(isNaN(o)||isNaN(a))return r.writeHead(400,{"Content-Type":"text/plain"}),void r.end("Both query parameters must be valid numbers.");try{const e=addNumbers(o,a);r.writeHead(200,{"Content-Type":"text/plain"}),r.end(`The sum of ${o} and ${a} is ${e}`)}catch(e){r.writeHead(500,{"Content-Type":"text/plain"}),r.end("An error occurred while processing your request.")}}else r.writeHead(404,{"Content-Type":"text/plain"}),r.end("Not Found")})).on("error",(e=>{console.error("Server error:",e)}));function createServer(){return server}process.on("uncaughtException",(e=>{console.error("Uncaught exception:",e),process.exit(1)})),require.main===module&&server.listen(PORT,(()=>{console.log(`Server running at http://localhost:${PORT}/`)})),module.exports={createServer:createServer};